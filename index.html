<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>Gatito</title>
<style>
:root{
  --bg:#ffffff;
  --card:rgba(255,255,255,0.60);
  --grid:#dddddd;
  --x:#12a979;
  --o:#ff5577;
  --txt:#111;
  --mut:#55f568;
  --acc:#ffb74d;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  color:var(--txt);
  font-family:system-ui,apple-system,Segoe UI,Roboto,Ubuntu,sans-serif;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:16px;
  background:#fff;
  -webkit-font-smoothing:antialiased;
  background-image:url("mono.png");
  background-size:cover;
  background-position:center;
}

.app{width:100%; max-width:520px}
.card{
  background:var(--card);
  backdrop-filter:blur(6px);
  -webkit-backdrop-filter:blur(6px);
  border:1px solid rgba(255,255,255,.06);
  border-radius:16px;
  padding:16px;
  box-shadow:0 6px 28px rgba(0,0,0,.12);
}
header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:10px;
}
h1{margin:0; font-size:20px}
.row{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  align-items:center;
}
input,select,button{
  appearance:none;
  border:1px solid var(--grid);
  background:#fff;
  color:var(--txt);
  padding:10px 12px;
  border-radius:10px;
  font-size:14px;
}
input{flex:1; min-width:0}
button{cursor:pointer}
button.primary{
  background:linear-gradient(108deg,#f6f9f9,#eee);
  border-color:#cfcfde;
}
.pill{
  padding:6px 10px;
  border-radius:999px;
  background:#fff;
  border:1px solid var(--grid);
  font-size:12px;
  color:#444;
}
#status{margin:8px 0; color:var(--mut); font-size:14px}
.board-wrap{position:relative}
.grid{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
  margin-top:12px;
}
.cell{
  aspect-ratio:1/1;
  border-radius:12px;
  background:rgba(255,255,255,0.55);
  border:1px solid rgba(0,0,0,0.08);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:48px;
  font-weight:800;
  cursor:pointer;
  user-select:none;
  transition:.08s ease;
}
.cell:active{transform:scale(.98)}
.cell.x{color:var(--x)}
.cell.o{color:var(--o)}
.cell.win{
  outline:2px solid var(--acc);
  box-shadow:0 0 3px rgba(255,183,77,.16) inset;
}
.win-line{
  position:absolute;
  top:0; left:0;
  height:4px;
  background:rgba(255,183,77,0.95);
  box-shadow:0 0 12px rgba(255,183,77,.45);
  transform-origin:left center;
  transform:scaleX(0);
  transition:transform .4s ease;
}
</style>
</head>
<body>
<div class="app">
  <div class="card">
    <header>
      <h1>Gatito</h1>
      <div class="row">
        <div class="pill">✕: <span id="scoreX">0</span></div>
        <div class="pill">○: <span id="scoreO">0</span></div>
      </div>
    </header>
    <div class="row">
      <input id="nameX" placeholder="Nombre X">
      <input id="nameO" placeholder="Nombre O">
    </div>
    <div id="status">Turno de X</div>
    <div class="board-wrap">
      <div class="grid" id="grid"></div>
      <div class="win-line" id="line"></div>
    </div>
    <div class="row" style="margin-top:12px">
      <button id="reset">Reiniciar</button>
      <button id="new">Partida nueva</button>
    </div>
  </div>
</div>

<script>
const grid = document.getElementById("grid");
const statusEl = document.getElementById("status");
const lineEl = document.getElementById("line");
const nameX = document.getElementById("nameX");
const nameO = document.getElementById("nameO");
const scoreX = document.getElementById("scoreX");
const scoreO = document.getElementById("scoreO");
const resetBtn = document.getElementById("reset");
const newBtn = document.getElementById("new");

let board = Array(9).fill("");
let xTurn = true;
let lock = false;
let puntosX = 0;
let puntosO = 0;

for(let i=0;i<9;i++){
  const cell=document.createElement("div");
  cell.className="cell";
  cell.onclick=()=>clickCell(i);
  grid.appendChild(cell);
}

function clickCell(i){
  if(lock||board[i]!="")return;
  board[i]=xTurn?"X":"O";
  dibujar();
  const w=calcWinner();
  if(w){marcarGanador(w);return;}
  xTurn=!xTurn;
  statusEl.textContent="Turno de "+(xTurn?"X":"O");
}

function dibujar(){
  for(let i=0;i<9;i++){
    grid.children[i].textContent=board[i];
    grid.children[i].className="cell "+(board[i]?board[i].toLowerCase():"");
  }
}

function calcWinner(){
  const w=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
  for(const [a,b,c] of w){
    if(board[a]&&board[a]==board[b]&&board[a]==board[c])return[a,b,c];
  }
  return null;
}

function marcarGanador(w){
  lock=true;
  for(const i of w)grid.children[i].classList.add("win");
  const winner=board[w[0]];
  if(winner=="X")puntosX++;
  else puntosO++;
  scoreX.textContent=puntosX;
  scoreO.textContent=puntosO;
  statusEl.textContent="Ganó "+winner+"!";
  setTimeout(()=>{lineaGanadora(w);},200);
}

function lineaGanadora(w){
  const pos=[
    [50,10,0],
    [50,50,0],
    [50,90,0],
    [10,50,90],
    [50,50,90],
    [90,50,90],
    [50,50,45],
    [50,50,-45]
  ];
  const i=[0,1,2,3,4,5,6,7].find(j=>{
    const set=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
    return JSON.stringify(set[j])==JSON.stringify(w);
  });
  if(i!=undefined){
    lineEl.style.top=pos[i][1]+"%";
    lineEl.style.left=pos[i][0]+"%";
    lineEl.style.transform="rotate("+pos[i][2]+"deg) scaleX(1)";
  }
}

resetBtn.onclick=()=>{
  board=Array(9).fill("");
  xTurn=true;
  lock=false;
  lineEl.style.transform="scaleX(0)";
  for(const c of grid.children)c.className="cell";
  dibujar();
  statusEl.textContent="Turno de X";
};
newBtn.onclick=()=>{
  puntosX=0;puntosO=0;
  scoreX.textContent="0";
  scoreO.textContent="0";
  resetBtn.onclick();
};
dibujar();
</script>
</body>
</html>
